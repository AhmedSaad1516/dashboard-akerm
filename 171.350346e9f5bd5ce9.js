"use strict";(self.webpackChunkbabiChechaDashboard=self.webpackChunkbabiChechaDashboard||[]).push([[171],{1171:(it,g,d)=>{d.r(g),d.d(g,{StaffsModule:()=>ot});var f=d(6895),h=d(5415),_=d(8996),U=d(7579),n=d(4006),u=d(5938),C=d(1283),b=d(7889),v=d(1884),A=d(3900),t=d(4650),w=d(529);let Z=(()=>{class s{constructor(e){this.http=e}getAllStaff(e){let a=new w.LE;return e&&(a=a.append("roleNameFilter",e)),this.http.get("http://akremplatform.somee.com/api/Staffs/GetAll",{params:a})}getAllStaffRoles(){return this.http.get("http://akremplatform.somee.com/api/Staffs/GetAllStaffRoles")}addNewStaff(e){return this.http.post("http://akremplatform.somee.com/api/Staffs/Create",e)}editStaff(e){return this.http.put("http://akremplatform.somee.com/api/Staffs/Edit",e)}resetPasswordStaff(e){return this.http.post("http://akremplatform.somee.com/api/Staffs/ResetPassword",e)}toggleDeleteStaff(e){return this.http.post(`http://akremplatform.somee.com/api/Staffs/ToggleSoftDelete?id=${e}`,{})}deletePermanentlyStaff(e){return this.http.delete(`http://akremplatform.somee.com/api/Staffs/DeletePermanently?id=${e}`)}unLockStaff(e){return this.http.post(`http://akremplatform.somee.com/api/Staffs/UnlockPasswordField?id=${e}`,{})}AllowNationalIdStaff(e,a){return this.http.get(`http://akremplatform.somee.com/api/Staffs/AllowNationalId?nationalId=${e}&id=${a}`,{})}AllowEmailAddressStaff(e,a){return this.http.get(`http://akremplatform.somee.com/api/Staffs/AllowEmailAddress?email=${e}&id=${a}`,{})}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(w.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var T=d(2018),S=d(8796),x=d(8372);function q(s,i){1&s&&t._UZ(0,"app-loader")}function N(s,i){1&s&&(t.TgZ(0,"div",34)(1,"span",35),t._UZ(2,"i",36),t.qZA(),t._uU(3," Please add data required ! "),t.qZA())}function P(s,i){1&s&&(t.TgZ(0,"div",34)(1,"span",35),t._UZ(2,"i",36),t.qZA(),t._uU(3," Please add data required ! "),t.qZA())}function k(s,i){1&s&&(t.TgZ(0,"div",34)(1,"span",35),t._UZ(2,"i",36),t.qZA(),t._uU(3," Please add data required ! "),t.qZA())}function I(s,i){1&s&&(t.TgZ(0,"div",34)(1,"span",37),t._UZ(2,"i",38),t.qZA(),t._uU(3," this email id is already uesed before ! "),t.qZA())}function J(s,i){1&s&&(t.TgZ(0,"div",34)(1,"span",35),t._UZ(2,"i",36),t.qZA(),t._uU(3," Please add data required! "),t.qZA())}function B(s,i){1&s&&(t.TgZ(0,"div",34)(1,"span",35),t._UZ(2,"i",36),t.qZA(),t._uU(3," Please enter at least 14 characters! "),t.qZA())}function M(s,i){1&s&&(t.TgZ(0,"div",34)(1,"span",37),t._UZ(2,"i",38),t.qZA(),t._uU(3," this national id is already uesed before ! "),t.qZA())}function E(s,i){1&s&&(t.TgZ(0,"div",34)(1,"span",35),t._UZ(2,"i",36),t.qZA(),t._uU(3," Please enter at least 8 characters! "),t.qZA())}function D(s,i){1&s&&(t.TgZ(0,"div",34)(1,"span",35),t._UZ(2,"i",36),t.qZA(),t._uU(3," Please add data required ! "),t.qZA())}function R(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",14)(1,"label",15),t._uU(2,"Password "),t.qZA(),t.TgZ(3,"div",39),t._UZ(4,"input",40),t.TgZ(5,"span",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.viewpass())}),t._UZ(6,"i",42),t.qZA()(),t.YNc(7,E,4,0,"div",11),t.YNc(8,D,4,0,"div",11),t.qZA()}if(2&s){const e=t.oxw();let a;t.xp6(4),t.Q6J("type",e.changetype?"password":"text"),t.xp6(2),t.Q6J("ngClass",e.visible?"ti ti-eye-off":"ti ti-eye"),t.xp6(1),t.Q6J("ngIf",e.showPasswordError),t.xp6(1),t.Q6J("ngIf",(null==(a=e.formAddStaff.get("Password"))?null:a.touched)&&(null==(a=e.formAddStaff.get("Password"))?null:a.invalid))}}function F(s,i){1&s&&(t.TgZ(0,"div",34)(1,"span",35),t._UZ(2,"i",36),t.qZA(),t._uU(3," Please enter at least 8 characters! "),t.qZA())}function O(s,i){1&s&&(t.TgZ(0,"div",34)(1,"span",35),t._UZ(2,"i",36),t.qZA(),t._uU(3," Please add required data! "),t.qZA())}function Q(s,i){1&s&&(t.TgZ(0,"div",34)(1,"span",35),t._UZ(2,"i",36),t.qZA(),t._uU(3," Passwords do not match! "),t.qZA())}function Y(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",14)(1,"label",15),t._uU(2,"ConfirmPassword "),t.qZA(),t.TgZ(3,"div",39),t._UZ(4,"input",43),t.TgZ(5,"span",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.viewpass2())}),t._UZ(6,"i",42),t.qZA()(),t.YNc(7,F,4,0,"div",11),t.YNc(8,O,4,0,"div",11),t.YNc(9,Q,4,0,"div",11),t.qZA()}if(2&s){const e=t.oxw();let a,o,l;t.xp6(4),t.Q6J("type",e.changetype2?"password":"text"),t.xp6(2),t.Q6J("ngClass",e.visible2?"ti ti-eye-off":"ti ti-eye"),t.xp6(1),t.Q6J("ngIf",e.showPasswordErrorConfirm&&(null==(a=e.formAddStaff.get("ConfirmPassword"))?null:a.touched)),t.xp6(1),t.Q6J("ngIf",(null==(o=e.formAddStaff.get("ConfirmPassword"))?null:o.touched)&&(null==(o=e.formAddStaff.get("ConfirmPassword"))?null:o.invalid)),t.xp6(1),t.Q6J("ngIf",(null==(l=e.formAddStaff.get("ConfirmPassword"))?null:l.touched)&&e.passwordTyped.password&&e.passwordTyped.confirmPassword&&!e.passwordsMatch())}}function L(s,i){if(1&s&&(t.TgZ(0,"ng-option",44),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e)}}function G(s,i){1&s&&(t.TgZ(0,"div",34)(1,"span",35),t._UZ(2,"i",36),t.qZA(),t._uU(3," Please add data required ! "),t.qZA())}function $(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addStaff())}),t._uU(1," Add "),t.qZA()}if(2&s){const e=t.oxw();let a;t.Q6J("disabled",(null==(a=e.formAddStaff.get("SelectedRoles"))?null:a.invalid)||(null==(a=e.formAddStaff.get("SelectedRoles"))?null:a.touched)||(null==(a=e.formAddStaff.get("NationalId"))?null:a.value.length)<14||e.showNationalIdError||e.formAddStaff.invalid||(null==(a=e.formAddStaff.get("Password"))?null:a.value)!==(null==(a=e.formAddStaff.get("ConfirmPassword"))?null:a.value))}}function H(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updateStaff())}),t._uU(1,"Update"),t.qZA()}}let y=(()=>{class s{constructor(e,a,o,l,r,c){this.fb=e,this.serv=a,this.toaster=o,this.data=l,this.matDialog=r,this.dialog=c,this.loader=!1,this.url="",this.visible=!0,this.changetype=!0,this.changetype1=!0,this.changetype2=!0,this.visible1=!0,this.visible2=!0,this.roles=[],this.showPasswordError=!1,this.showPasswordErrorConfirm=!1,this.showPasswordErrorId=!1,this.showNationalIdError=!1,this.showNationalIdTrue=!1,this.showEmailAddressTrue=!1,this.showEmailAddressfalse=!1,this.passwordTyped={password:!1,confirmPassword:!1}}ngOnInit(){this.createForm(),this.getAllRoles(),this.checkNationalId(),this.checkEmailAddress()}createForm(){this.formAddStaff=this.fb.group({Id:[this.data?.id||""],FirstName:[this.data?.firstName||"",[n.kI.required,n.kI.minLength(2)]],LastName:[this.data?.lastName||"",[n.kI.required,n.kI.minLength(2)]],NationalId:[this.data?.nationalId||"",[n.kI.required,n.kI.maxLength(14)]],NationalIdCardImage:["http://"+this.data?.nationalIdCardImagePath||0,n.kI.required],Email:[this.data?.email||"",[n.kI.required,n.kI.email]],Password:["",n.kI.required],ConfirmPassword:["",n.kI.required]}),this.formAddStaff.get("Password")?.valueChanges.subscribe(e=>{this.passwordTyped.password=e.length>0,this.showPasswordError=e.length<8}),this.formAddStaff.get("ConfirmPassword")?.valueChanges.subscribe(e=>{this.passwordTyped.confirmPassword=e.length>0,this.showPasswordErrorConfirm=e.length<8}),this.roles.forEach((e,a)=>{this.creatFormData().append(`SelectedRoles[${a}]`,e)}),this.formValues=this.formAddStaff.value}passwordsMatch(){const e=this.formAddStaff.get("Password")?.value,a=this.formAddStaff.get("ConfirmPassword")?.value;return e===a}onSubmit(){this.passwordsMatch()||console.log("Passwords do not match")}selectPhoto(e){if(this.photoName=e.target.value,this.formAddStaff.get("NationalIdCardImage")?.setValue(e.target.files[0]),e.target.files[0]){let a=new FileReader;a.readAsDataURL(e.target.files[0]),a.onload=o=>{this.url=o.target.result}}}close(){let e=!1;Object.keys(this.formValues).forEach(a=>{this.formValues[a]!==this.formAddStaff.value[a]&&(e=!0)}),e?this.matDialog.open(C.f,{disableClose:!0}).afterClosed().subscribe(o=>{}):this.dialog.close()}viewpass(){this.visible=!this.visible,this.changetype=!this.changetype}viewpass1(){this.visible1=!this.visible1,this.changetype1=!this.changetype1}viewpass2(){this.visible2=!this.visible2,this.changetype2=!this.changetype2}getAllRoles(){this.serv.getAllStaffRoles().subscribe(e=>{this.roles=e.content})}addStaff(){this.loader=!0;let e=this.creatFormData();this.serv.addNewStaff(e).subscribe(a=>{this.toaster.success("add staff successfully","",{progressBar:!0,timeOut:4e3,closeButton:!0});let o=new Audio;o.src="../../../assets/notification-sound/login.wav",o.load(),o.play(),this.loader=!1,this.dialog.close(!0)},a=>{this.loader=!1})}updateStaff(){this.loader=!0;let e=this.creatFormData();this.serv.editStaff(e).subscribe(a=>{this.toaster.success("edit staff successfully","",{progressBar:!0,timeOut:4e3,closeButton:!0});let o=new Audio;o.src="../../../assets/notification-sound/login.wav",o.load(),o.play(),this.loader=!1,this.dialog.close(!0)},a=>{this.loader=!1})}creatFormData(){let e=new FormData;return Object.entries(this.formAddStaff.value).forEach(([a,o])=>{e.append(a,o)}),this.roles.forEach((a,o)=>{e.append(`SelectedRoles[${o}]`,a)}),e}checkNationalId(){this.formAddStaff.get("NationalId")?.valueChanges.pipe((0,b.b)(100),(0,v.x)(),(0,A.w)(e=>this.serv.AllowNationalIdStaff(e,this.data?.id))).subscribe(e=>{!0===e?(this.showNationalIdTrue=!0,this.showNationalIdError=!1):(this.showNationalIdError=!0,this.showNationalIdTrue=!1)})}checkEmailAddress(){this.formAddStaff.get("Email")?.valueChanges.pipe((0,b.b)(100),(0,v.x)(),(0,A.w)(e=>this.serv.AllowEmailAddressStaff(e,this.data?.id))).subscribe(e=>{!0===e?(this.showEmailAddressTrue=!0,this.showEmailAddressfalse=!1):(this.showEmailAddressfalse=!0,this.showEmailAddressTrue=!1)})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(n.qu),t.Y36(Z),t.Y36(T._W),t.Y36(u.WI),t.Y36(u.uw),t.Y36(u.so))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-staff"]],decls:57,vars:18,consts:[[4,"ngIf"],[1,"modal-content","p-3","p-md-5"],[1,"modal-body"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"text-center","mb-4"],[1,"mb-2"],["id","editUserForm","novalidate","novalidate",1,"row","g-3","fv-plugins-bootstrap5","fv-plugins-framework",3,"formGroup"],[1,"col-12","col-md-6","fv-plugins-icon-container"],["for","modalEditUserFirstName",1,"form-label"],["formControlName","FirstName","type","text","id","modalEditUserFirstName","name","modalEditUserFirstName","placeholder","John",1,"form-control"],[1,"fv-plugins-message-container","invalid-feedback"],["class","alert alert-danger d-flex align-items-center","role","alert",4,"ngIf"],["for","modalEditUserLastName",1,"form-label"],["formControlName","LastName","type","text","id","modalEditUserLastName","name","modalEditUserLastName","placeholder","Doe",1,"form-control"],[1,"col-12","col-md-6"],["for","modalEditUserEmail",1,"form-label"],["formControlName","Email","type","email","id","modalEditUserEmail","name","modalEditUserEmail","placeholder","example@gmail.com",1,"form-control"],["for","selected","type","button",1,"btn","btn-primaryl"],["role","alert"],["alt","",1,"myu",3,"src","click"],["type","file","hidden","","id","selected",1,"form-control",3,"change"],["selectFileInput",""],[1,"col-12","fv-plugins-icon-container"],["for","modalEditUserName",1,"form-label"],["formControlName","NationalId","type","text","id","modalEditUserName","name","modalEditUserName","placeholder","john.doe.007",1,"form-control"],["class","col-12 col-md-6",4,"ngIf"],["for","modalEditUserStatus",1,"form-label"],["formControlName","SelectedRoles",3,"multiple"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","text-center"],["type","submit","class","btn btn-success me-sm-3 me-1 waves-effect waves-light",3,"disabled","click",4,"ngIf"],["type","submit","class","btn btn-primary me-sm-3 me-1 waves-effect waves-light",3,"click",4,"ngIf"],["type","reset",1,"btn","btn-label-secondary","waves-effect",3,"click"],["type","hidden"],["role","alert",1,"alert","alert-danger","d-flex","align-items-center"],[1,"alert-icon","text-danger","me-2"],[1,"ti","ti-ban","ti-xs"],[1,"alert-icon","text-danger","alert-dismissible","me-2"],[1,"ti","ti-check","ti-xs"],[1,"input-group","input-group-merge","has-validation"],["formControlName","Password","type","password","name","currentPassword","id","currentPassword","placeholder","\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7",1,"form-control",3,"type"],[1,"input-group-text","cursor-pointer",3,"click"],[2,"font-size","17px",3,"ngClass"],["formControlName","ConfirmPassword","type","password","name","confirmPassword","id","confirmPassword","placeholder","\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7",1,"form-control",3,"type"],[3,"value"],["type","submit",1,"btn","btn-success","me-sm-3","me-1","waves-effect","waves-light",3,"disabled","click"],["type","submit",1,"btn","btn-primary","me-sm-3","me-1","waves-effect","waves-light",3,"click"]],template:function(e,a){if(1&e){const o=t.EpF();t.YNc(0,q,1,0,"app-loader",0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"button",3),t.TgZ(4,"div",4)(5,"h3",5),t._uU(6,"Add Client Information"),t.qZA()(),t.TgZ(7,"form",6)(8,"div",7)(9,"label",8),t._uU(10,"First Name"),t.qZA(),t._UZ(11,"input",9)(12,"div",10),t.YNc(13,N,4,0,"div",11),t.qZA(),t.TgZ(14,"div",7)(15,"label",12),t._uU(16,"Last Name"),t.qZA(),t._UZ(17,"input",13)(18,"div",10),t.YNc(19,P,4,0,"div",11),t.qZA(),t.TgZ(20,"div",14)(21,"label",15),t._uU(22,"Email"),t.qZA(),t._UZ(23,"input",16),t.YNc(24,k,4,0,"div",11),t.YNc(25,I,4,0,"div",11),t.qZA(),t.TgZ(26,"div",14)(27,"label",17),t._uU(28," Change Photo"),t.qZA(),t.TgZ(29,"div",18)(30,"div")(31,"p"),t._uU(32),t.qZA()(),t.TgZ(33,"img",19),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(35);return t.KtG(r.click())}),t.qZA()(),t.TgZ(34,"input",20,21),t.NdJ("change",function(r){return a.selectPhoto(r)}),t.qZA()(),t.TgZ(36,"div",22)(37,"label",23),t._uU(38,"NationalId"),t.qZA(),t._UZ(39,"input",24),t.YNc(40,J,4,0,"div",11),t.YNc(41,B,4,0,"div",11),t.YNc(42,M,4,0,"div",11),t.qZA(),t.YNc(43,R,9,4,"div",25),t.YNc(44,Y,10,5,"div",25),t.TgZ(45,"div",14)(46,"label",26),t._uU(47,"Role"),t.qZA(),t.TgZ(48,"ng-select",27),t.YNc(49,L,2,2,"ng-option",28),t.qZA(),t.YNc(50,G,4,0,"div",11),t.qZA(),t.TgZ(51,"div",29),t.YNc(52,$,2,1,"button",30),t.YNc(53,H,2,0,"button",31),t.TgZ(54,"button",32),t.NdJ("click",function(){return a.close()}),t._uU(55," Cancel "),t.qZA()(),t._UZ(56,"input",33),t.qZA()()()}if(2&e){let o,l,r,c,p,m;t.Q6J("ngIf",a.loader),t.xp6(7),t.Q6J("formGroup",a.formAddStaff),t.xp6(6),t.Q6J("ngIf",(null==(o=a.formAddStaff.get("FirstName"))?null:o.touched)&&(null==(o=a.formAddStaff.get("FirstName"))?null:o.invalid)),t.xp6(6),t.Q6J("ngIf",(null==(l=a.formAddStaff.get("LastName"))?null:l.touched)&&(null==(l=a.formAddStaff.get("LastName"))?null:l.invalid)),t.xp6(5),t.Q6J("ngIf",(null==(r=a.formAddStaff.get("Email"))?null:r.touched)&&(null==(r=a.formAddStaff.get("Email"))?null:r.invalid)),t.xp6(1),t.Q6J("ngIf",a.showEmailAddressfalse),t.xp6(7),t.Oqu(a.photoName),t.xp6(1),t.Q6J("src",a.url?a.url:a.formAddStaff.value.NationalIdCardImage,t.LSH),t.xp6(7),t.Q6J("ngIf",(null==(c=a.formAddStaff.get("NationalId"))?null:c.touched)&&(null==(c=a.formAddStaff.get("NationalId"))?null:c.invalid)),t.xp6(1),t.Q6J("ngIf",(null==(p=a.formAddStaff.get("NationalId"))?null:p.value.length)<14&&(null==(p=a.formAddStaff.get("NationalId"))?null:p.touched)),t.xp6(1),t.Q6J("ngIf",a.showNationalIdError),t.xp6(1),t.Q6J("ngIf",!a.data),t.xp6(1),t.Q6J("ngIf",!a.data),t.xp6(4),t.Q6J("multiple",!0),t.xp6(1),t.Q6J("ngForOf",a.roles),t.xp6(1),t.Q6J("ngIf",(null==(m=a.formAddStaff.get("SelectedRoles"))?null:m.touched)&&(null==(m=a.formAddStaff.get("SelectedRoles"))?null:m.invalid)),t.xp6(2),t.Q6J("ngIf",!a.data),t.xp6(1),t.Q6J("ngIf",a.data)}},dependencies:[f.mk,f.sg,f.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,S.w9,S.jq,x.R]}),s})();function K(s,i){1&s&&t._UZ(0,"app-loader")}function j(s,i){if(1&s&&(t.TgZ(0,"option"),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.xp6(1),t.Oqu(e)}}function z(s,i){if(1&s&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"date"),t.qZA()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,null==e?null:e.lastUpdatedOn,"d/M/yyyy"))}}function V(s,i){1&s&&(t.TgZ(0,"span",38),t._uU(1,"Nothing was last updated"),t.qZA())}function W(s,i){if(1&s&&(t.TgZ(0,"span",38),t._uU(1),t.qZA()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.nationalId," ")}}function X(s,i){1&s&&(t.TgZ(0,"span",38),t._uU(1," There is no national ID "),t.qZA())}function tt(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"tr",30)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",31)(4,"div",32)(5,"div",33)(6,"div",34),t._UZ(7,"img",35),t.qZA()(),t.TgZ(8,"div",36)(9,"a",37)(10,"span",38),t._uU(11),t.qZA()(),t.TgZ(12,"small",39),t._uU(13),t.qZA()()()(),t.TgZ(14,"td")(15,"span",40),t._UZ(16,"span",41),t._uU(17),t.qZA()(),t.TgZ(18,"td")(19,"span",42),t._uU(20),t.qZA()(),t.TgZ(21,"td")(22,"span",38),t._UZ(23,"span",38),t._uU(24),t.ALo(25,"date"),t.qZA()(),t.TgZ(26,"td"),t.YNc(27,z,3,4,"span",43),t.YNc(28,V,2,0,"span",43),t.qZA(),t.TgZ(29,"td"),t.YNc(30,W,2,1,"span",43),t.YNc(31,X,2,0,"span",43),t.qZA(),t.TgZ(32,"td")(33,"div",44)(34,"a",45),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openUodateStaff(l))}),t._UZ(35,"i",46),t.qZA(),t.TgZ(36,"a",47),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openDeletePermanently(l.id))}),t._UZ(37,"i",48),t.qZA(),t.TgZ(38,"a",49),t._UZ(39,"i",50),t.qZA(),t.TgZ(40,"div",51)(41,"a",52),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openToggleDelete(l.id))}),t._uU(42," Soft Deleted "),t.qZA(),t.TgZ(43,"button",53),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openResetPassword(l.id))}),t._uU(44," Reset Password "),t.qZA(),t.TgZ(45,"a",54),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openUnlockPassword(l.id))}),t._uU(46," Unlock Password "),t.qZA()()(),t.TgZ(47,"div",55)(48,"div",56)(49,"div",57)(50,"div",58)(51,"h2",59),t._uU(52,"warning"),t.qZA(),t._UZ(53,"button",60),t.qZA(),t.TgZ(54,"div",61),t._uU(55,"Are you sure you want to soft delete your staff? "),t.qZA(),t.TgZ(56,"div",62)(57,"button",63),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteToggleDeleteStaff())}),t._uU(58," Soft Delete "),t.qZA()()()()(),t.TgZ(59,"div",64)(60,"div",65)(61,"div",66)(62,"div",58)(63,"h5",67),t._uU(64,"Reset Password"),t.qZA(),t._UZ(65,"button",60),t.qZA(),t.TgZ(66,"div",68)(67,"div",6)(68,"div",69)(69,"label",70),t._uU(70,"Password"),t.qZA(),t.TgZ(71,"div",71),t._UZ(72,"input",72),t.TgZ(73,"span",73),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.viewpass1())}),t._UZ(74,"i",74),t.qZA()()()(),t.TgZ(75,"div",75)(76,"div",76)(77,"label",77),t._uU(78,"Confirm Password"),t.qZA(),t.TgZ(79,"div",71),t._UZ(80,"input",78),t.TgZ(81,"span",73),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.viewpass2())}),t._UZ(82,"i",74),t.qZA()()()()(),t.TgZ(83,"div",62)(84,"button",79),t._uU(85," Close "),t.qZA(),t.TgZ(86,"button",80),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.resetPassword())}),t._uU(87,"Reset Password"),t.qZA()()()()(),t.TgZ(88,"div",81)(89,"div",65)(90,"div",57)(91,"div",58)(92,"h2",59),t._uU(93,"warning"),t.qZA(),t._UZ(94,"button",60),t.qZA(),t.TgZ(95,"div",61),t._uU(96,"Are you sure you want to delete permanently your staff?"),t.qZA(),t.TgZ(97,"div",62)(98,"button",63),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deletePermanentlyStaff())}),t._uU(99," Delete "),t.qZA()()()()(),t.TgZ(100,"div",82)(101,"div",65)(102,"div",57)(103,"div",58)(104,"h2",59),t._uU(105,"warning"),t.qZA(),t._UZ(106,"button",60),t.qZA(),t.TgZ(107,"div",61),t._uU(108,"Are you sure you want to unlock password your staff? "),t.qZA(),t.TgZ(109,"div",62)(110,"button",83),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.UnlockPasswordStaff())}),t._uU(111," Unlock "),t.qZA()()()()()()()}if(2&s){const e=i.$implicit,a=i.index,o=t.oxw();let l;t.xp6(2),t.Oqu(a+1),t.xp6(5),t.Q6J("src","http://"+(null==e?null:e.imageUrl),t.LSH),t.xp6(4),t.AsE("",null==e?null:e.firstName,"",null==e?null:e.firstName,""),t.xp6(2),t.Oqu(null==e?null:e.email),t.xp6(4),t.hij(" ",e.roles,""),t.xp6(2),t.Udp("background-color",!1===e.isDeleted?" #dff7e9 !important":"#fce5e6 !important !important")("color",!1===e.isDeleted?" #28c76f!important":" #28c76f !important;"),t.xp6(1),t.hij(" ",e.isDeleted?"Deleted":"NoDeleted"," "),t.xp6(4),t.Oqu(t.xi3(25,22,null==e?null:e.createdOn,"d/M/yyyy")),t.xp6(3),t.Q6J("ngIf",null!==(null==e?null:e.lastUpdatedOn)),t.xp6(1),t.Q6J("ngIf",null===(null==e?null:e.lastUpdatedOn)),t.xp6(2),t.Q6J("ngIf",null!==(null==e?null:e.nationalId)),t.xp6(1),t.Q6J("ngIf",null===(null==e?null:e.nationalId)),t.xp6(30),t.Q6J("formGroup",o.formResetPassword),t.xp6(11),t.Q6J("type",o.changetype1?"password":"text"),t.xp6(2),t.Q6J("ngClass",o.visible1?"ti ti-eye-off":"ti ti-eye"),t.xp6(6),t.Q6J("type",o.changetype2?"password":"text"),t.xp6(2),t.Q6J("ngClass",o.visible2?"ti ti-eye-off":"ti ti-eye"),t.xp6(4),t.Q6J("disabled",o.formResetPassword.invalid||(null==(l=o.formResetPassword.get("password"))?null:l.value)!==(null==(l=o.formResetPassword.get("confirmPassword"))?null:l.value))}}const et=[{path:"",component:(()=>{class s{constructor(e,a,o,l){this.serv=e,this.fb=a,this.toaster=o,this.dialog=l,this.showModel=!1,this.loader=!1,this.showError=!1,this.staff=[],this.roles=[],this.selectedRole="",this.dtOptions={},this.dtTrigger=new U.x,this.changetype1=!0,this.changetype2=!0,this.visible1=!0,this.visible2=!0}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,searching:!0},this.dtTrigger.next(null),this.createFormReset(),this.getAllStaffs(),this.getAllRoles()}createFormReset(e=""){this.formResetPassword=this.fb.group({password:["",n.kI.required],confirmPassword:["",n.kI.required],id:[e]})}openResetPassword(e){this.idResetPassword=e,this.createFormReset(e)}resetPassword(){this.loader=!0,this.serv.resetPasswordStaff(this.formResetPassword.value).subscribe(e=>{this.toaster.success("reset password  staff successfully","",{progressBar:!0,timeOut:4e3,closeButton:!0});let a=new Audio;a.src="../../../assets/notification-sound/login.wav",a.load(),a.play(),this.loader=!1,this.getAllStaffs()},e=>{this.loader=!1})}getAllStaffs(){this.loader=!0,this.serv.getAllStaff(this.selectedRole).subscribe(e=>{this.staff=e.content,this.loader=!1,this.dtTrigger.next(null),this.ngOnDestroy()},e=>{this.loader=!1,this.dtTrigger.next(null),this.ngOnDestroy()})}getFilter(e){let a=e.target.value;"All"===a?this.getAllStaffs():(this.selectedRole=a,this.getById(a),console.log(a))}getById(e){this.loader=!0,this.serv.getAllStaff(e).subscribe(a=>{this.staff=a.content,this.loader=!1,this.dtTrigger.next(null),this.ngOnDestroy()},a=>{this.loader=!1,this.dtTrigger.next(null),this.ngOnDestroy()})}ngOnDestroy(){this.dtTrigger.unsubscribe()}getAllRoles(){this.serv.getAllStaffRoles().subscribe(e=>{this.roles=e.content})}openToggleBlock(e){this.idBlock=e}openToggleDelete(e){this.idDelete=e}deleteToggleDeleteStaff(){this.loader=!0,this.serv.toggleDeleteStaff(this.idDelete).subscribe(e=>{this.toaster.success("toggle delete staff in successfully","",{progressBar:!0,timeOut:4e3,closeButton:!0});let a=new Audio;a.src="../../../assets/notification-sound/login.wav",a.load(),a.play(),this.loader=!1,this.getAllStaffs()},e=>{this.loader=!1})}openAddStaff(){this.dialog.open(y,{width:"750px",height:"70%",disableClose:!0}).afterClosed().subscribe(a=>{1==a&&(this.getAllStaffs(),this.dtTrigger.next(null),this.ngOnDestroy())})}openUodateStaff(e){this.dialog.open(y,{width:"750px",height:"70%",disableClose:!0,data:e}).afterClosed().subscribe(o=>{1==o&&(this.getAllStaffs(),this.dtTrigger.next(null),this.ngOnDestroy())})}viewpass1(){this.visible1=!this.visible1,this.changetype1=!this.changetype1}viewpass2(){this.visible2=!this.visible2,this.changetype2=!this.changetype2}openDeletePermanently(e){this.idDeletePermanently=e}deletePermanentlyStaff(){this.loader=!0,this.serv.deletePermanentlyStaff(this.idDeletePermanently).subscribe(e=>{this.toaster.success("delete permanently  staff in successfully","",{progressBar:!0,timeOut:4e3,closeButton:!0});let a=new Audio;a.src="../../../assets/notification-sound/login.wav",a.load(),a.play(),this.loader=!1,this.getAllStaffs()},e=>{this.loader=!1})}openUnlockPassword(e){this.idUnlockPassword=e}UnlockPasswordStaff(){this.loader=!0,this.serv.unLockStaff(this.idUnlockPassword).subscribe(e=>{this.toaster.success("Unlock Password staff in successfully","",{progressBar:!0,timeOut:4e3,closeButton:!0});let a=new Audio;a.src="../../../assets/notification-sound/login.wav",a.load(),a.play(),this.loader=!1,this.getAllStaffs()},e=>{this.loader=!1})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(Z),t.Y36(n.qu),t.Y36(T._W),t.Y36(u.uw))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-staff-main"]],decls:46,vars:5,consts:[[4,"ngIf"],[1,"layout-wrapper","layout-content-navbar"],[1,"layout-container"],[1,"layout-page"],[1,"content-wrapper"],[1,"container-xxl","flex-grow-1","container-p-y"],[1,"row"],[1,"card"],[1,"card-header","border-bottom"],[1,"card-title","mb-3"],[1,"d-flex","justify-content-between","align-items-center","row","pb-2","gap-3","gap-md-0"],[1,"col-md-4","user_role"],["id","UserRole",1,"form-select","text-capitalize",3,"change"],["value",""],[4,"ngFor","ngForOf"],[1,"col-md-8","user_status"],["tabindex","0","aria-controls","DataTables_Table_0","type","button",1,"dt-button","add-new","btn","btn-primary",3,"click"],[1,"ti","ti-plus","me-0","me-sm-1","ti-xs"],[1,"d-none","d-sm-inline-block"],[1,"card-datatable","table-responsive"],["id","DataTables_Table_0_wrapper",1,"dataTables_wrapper","dt-bootstrap5","no-footer"],["datatable","","id","DataTables_Table_0","aria-describedby","DataTables_Table_0_info",1,"datatables-users","table","border-top","dataTable","no-footer","dtr-column",2,"width","1214px",3,"dtOptions","dtTrigger"],["rowspan","1","colspan","1","aria-label","",1,"control","sorting_disabled","dtr-hidden"],["tabindex","0","aria-controls","DataTables_Table_0","rowspan","1","colspan","1","aria-label","User: activate to sort column ascending","aria-sort","descending",1,"sorting","sorting_desc",2,"width","300px"],["tabindex","0","aria-controls","DataTables_Table_0","rowspan","1","colspan","1","aria-label","Billing: activate to sort column ascending",1,"sorting",2,"width","179px"],["tabindex","0","aria-controls","DataTables_Table_0","rowspan","1","colspan","1","aria-label","Status: activate to sort column ascending",1,"sorting",2,"width","91px"],["tabindex","0","aria-controls","DataTables_Table_0","rowspan","1","colspan","1","aria-label","Role: activate to sort column ascending",1,"sorting",2,"width","145px"],["tabindex","0","aria-controls","DataTables_Table_0","rowspan","1","colspan","1","aria-label","Plan: activate to sort column ascending",1,"sorting",2,"width","96px"],["rowspan","1","colspan","1","aria-label","Actions",1,"sorting_disabled",2,"width","137px"],["class","even",4,"ngFor","ngForOf"],[1,"even"],[1,"sorting_1"],[1,"d-flex","justify-content-start","align-items-center","user-name"],[1,"avatar-wrapper"],[1,"avatar","avatar-sm","me-3"],["alt","Avatar",1,"rounded-circle",3,"src"],[1,"d-flex","flex-column"],[1,"text-body","text-truncate"],[1,"fw-semibold"],[1,"text-muted"],[1,"text-truncate","d-flex","align-items-center"],[1,"badge","badge-center","rounded-pill","bg-label-secondary","w-px-30","h-px-30","me-2"],["text-capitalized","",1,"badge","bg-label-danger"],["class","fw-semibold",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"text-body",3,"click"],[1,"ti","ti-edit","ti-sm","me-2"],["data-bs-toggle","modal","data-bs-target","#basicModals",1,"text-body","delete-record",3,"click"],[1,"ti","ti-trash","ti-sm","mx-2"],["data-bs-toggle","dropdown",1,"text-body","dropdown-toggle","hide-arrow"],[1,"ti","ti-dots-vertical","ti-sm","mx-1"],[1,"dropdown-menu","dropdown-menu-end","m-0"],["data-bs-toggle","modal","data-bs-target","#modalToggleDelete",1,"dropdown-item",3,"click"],["data-bs-toggle","modal","data-bs-target","#basicModal",1,"dropdown-item",3,"click"],["data-bs-toggle","modal","data-bs-target","#modalUnlockPassword",1,"dropdown-item",3,"click"],["id","modalToggleDelete","aria-labelledby","modalToggleLabel","tabindex","-1","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title",2,"border-bottom","2px outset red"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"alartWring","modal-body"],[1,"modal-footer"],["data-bs-target","#modalToggle2","data-bs-toggle","modal","data-bs-dismiss","modal",1,"btn","btn-danger","waves-effect","waves-light",3,"click"],["id","basicModal","tabindex","-1",1,"modal","fade",2,"display","none"],["role","document",1,"modal-dialog"],[1,"modal-content",3,"formGroup"],["id","exampleModalLabel1",1,"modal-title"],[1,"modal-body"],[1,"col","mb-3"],["for","nameBasic",1,"form-label"],[1,"input-group","input-group-merge","has-validation"],["formControlName","password","type","password","name","confirmPassword","id","confirmPassword","placeholder","\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7",1,"form-control",3,"type"],[1,"input-group-text","cursor-pointer",3,"click"],[2,"font-size","17px",3,"ngClass"],[1,"row","g-2"],[1,"col","mb-0"],["for","emailBasic",1,"form-label"],["formControlName","confirmPassword","type","password","name","confirmPassword","id","confirmPassword","placeholder","\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7",1,"form-control",3,"type"],["type","button","data-bs-dismiss","modal",1,"btn","btn-label-secondary","waves-effect"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success","waves-effect","waves-light",3,"disabled","click"],["id","basicModals","tabindex","-1","aria-hidden","true",1,"modal","fade",2,"display","none"],["id","modalUnlockPassword","tabindex","-1","aria-hidden","true",1,"modal","fade",2,"display","none"],["data-bs-target","#modalToggle2","data-bs-toggle","modal","data-bs-dismiss","modal",1,"btn","btn-primary","waves-effect","waves-light",3,"click"]],template:function(e,a){1&e&&(t.YNc(0,K,1,0,"app-loader",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h5",9),t._uU(10,"Search Filter"),t.qZA(),t.TgZ(11,"div",10)(12,"div",11)(13,"select",12),t.NdJ("change",function(l){return a.getFilter(l)}),t.TgZ(14,"option",13),t._uU(15,"All "),t.qZA(),t.YNc(16,j,2,1,"option",14),t.qZA()(),t.TgZ(17,"div",15)(18,"button",16),t.NdJ("click",function(){return a.openAddStaff()}),t.TgZ(19,"span"),t._UZ(20,"i",17),t.TgZ(21,"span",18),t._uU(22,"Add New Staff"),t.qZA()()()()()(),t.TgZ(23,"div",19)(24,"div",20)(25,"table",21)(26,"thead")(27,"tr")(28,"th",22),t._uU(29,"ID"),t.qZA(),t.TgZ(30,"th",23),t._uU(31,"Staff Details"),t.qZA(),t.TgZ(32,"th",24),t._uU(33,"Role "),t.qZA(),t.TgZ(34,"th",25),t._uU(35,"Status"),t.qZA(),t.TgZ(36,"th",26),t._uU(37,"CreatedOn"),t.qZA(),t.TgZ(38,"th",27),t._uU(39,"lastUpdatedOn"),t.qZA(),t.TgZ(40,"th",27),t._uU(41,"NationalId"),t.qZA(),t.TgZ(42,"th",28),t._uU(43," Actions"),t.qZA()()(),t.TgZ(44,"tbody"),t.YNc(45,tt,112,25,"tr",29),t.qZA()()()()()()()()()()()),2&e&&(t.Q6J("ngIf",a.loader),t.xp6(16),t.Q6J("ngForOf",a.roles),t.xp6(9),t.Q6J("dtOptions",a.dtOptions)("dtTrigger",a.dtTrigger),t.xp6(20),t.Q6J("ngForOf",a.staff))},dependencies:[f.mk,f.sg,f.O5,n.YN,n.Kr,n.Fj,n.JJ,n.JL,n.sg,n.u,x.R,h.G,f.uU]}),s})()}];let at=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[_.Bz.forChild(et),_.Bz]}),s})();var st=d(8395);let ot=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[f.ez,at,n.UX,st.m,h.T]}),s})()}}]);